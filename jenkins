node {

    def app

    stage('Clone repository') {
        git(credentialsId: 'github', url: 'https://github.com/stcloudgate/3nglearn.git')
    }

    stage('Build image') {
       sh 'docker build -t stmum0107/ngclient:"${env.BUILD_NUMBER}" .'
    }

    stage('Push image') {
      sh 'docker push stmum0107/ngclient:"${env.BUILD_NUMBER}"'
    }

    //stage('Trigger ManifestUpdate') {
      //echo "triggering updatemanifestjob - to be coded"
      //build job: 'updatemanifest', parameters: [string(name: 'DOCKERTAG', value: env.BUILD_NUMBER)]
    //}
}

